(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{199:function(e,r,a){e.exports=a.p+"static/media/realworld.ea1785a0.png"},201:function(e,r,a){e.exports=a(393)},211:function(e,r,a){},393:function(e,r,a){"use strict";a.r(r);var t={};a.r(t),a.d(t,"registration",(function(){return x})),a.d(t,"login",(function(){return k})),a.d(t,"default",(function(){return C}));var n=a(0),o=a.n(n),l=a(31),s=a.n(l),i=a(10),c=a(16),u=a(187),m=a(188),d=(a(209),a(210),a(211),a(33)),p=a(17),h=a(81),b=a(82),f=a(89),E=a(83),g=a(90),v=a(131),w=a(62),y=a(41),_="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435",O=y.object().shape({username:y.string().required(_).min(4,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 4 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(50,"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),password:y.string().min(8,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 8").max(40,"\u041d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 40"),loginPassword:y.string().min(8,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 8").max(40,"\u041d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 40").required(_),email:y.string().required(_).email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email \u0430\u0434\u0440\u0435\u0441"),loginEmail:y.string().required(_).email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email \u0430\u0434\u0440\u0435\u0441")}),j=a(394),N=function(e){var r=e.label,a=e.changer,t=e.blur,n=e.idName,l=e.value,s=e.touched,i=e.error,c=e.apiError;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"form__row"},o.a.createElement("span",{className:"form__label"},r[0].toUpperCase()+r.slice(1)),o.a.createElement(j.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ".concat(r),onChange:a,onBlur:t,id:n,name:n,value:l,className:"form__input ".concat(s&&i?"has-error":null)})),s&&i?o.a.createElement("div",{className:"input__error"},i):null,c?o.a.createElement("div",{className:"input__error"},c):null)},S=a(56),R=a.n(S),x=function(e){var r=e.email,a=e.username,t=e.password;return function(e){var n,o;return R.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,R.a.awrap(fetch("https://conduit.productionready.io/api/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{email:r,username:a,password:t}})}));case 2:if(!(n=l.sent).ok){l.next=5;break}return l.abrupt("return",e({type:"USER_REGISTERED",payload:{reg:!0}}));case 5:return l.next=7,R.a.awrap(n.json().then((function(e){return{type:"REG_ERROR",payload:{error:e.errors}}})));case 7:return o=l.sent,l.abrupt("return",e(o));case 9:case"end":return l.stop()}}))}},k=function(e){var r=e.email,a=e.password;return function(e){var t;return R.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R.a.awrap(fetch("https://conduit.productionready.io/api/users/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{email:r,password:a}})}));case 2:return t=n.sent,console.log(t),n.abrupt("return",e({type:"ku"}));case 5:case"end":return n.stop()}}))}},C="ku",T=function(e){function r(e){var a;return Object(h.a)(this,r),(a=Object(f.a)(this,Object(E.a)(r).call(this,e))).loginHandler=function(e){(0,a.props.login)(e)},a.state={},a}return Object(g.a)(r,e),Object(b.a)(r,[{key:"render",value:function(){var e=this,r=this.props.error;return o.a.createElement(w.b,{initialValues:{password:"",email:""},validationSchema:O,onSubmit:function(r){console.log("asdasdasd"),e.loginHandler(r)}},(function(e){var a=e.values,t=e.errors,n=e.touched,l=e.handleChange,s=e.handleBlur;return o.a.createElement(w.a,{className:"form"},o.a.createElement(N,{label:"email",changer:l,blur:s,idName:"email",value:a.email,touched:n.email,error:t.email,apiError:r?r.email:null}),o.a.createElement(N,{label:"\u043f\u0430\u0440\u043e\u043b\u044c",changer:l,blur:s,idName:"password",value:a.password,touched:n.password,error:t.password,apiError:r?r.password:null}),o.a.createElement("div",{className:"form__row"},o.a.createElement(v.a,{className:"form__submit-btn",htmlType:"submit",type:"primary"},"\u0412\u043e\u0439\u0442\u0438"),o.a.createElement(p.b,{to:"/signup"},o.a.createElement(v.a,{type:"danger"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))}))}}]),r}(n.Component);T.defaultProps={login:null,error:null};var A=Object(c.b)((function(e){return{error:e.user.error}}),(function(e){return{login:Object(i.bindActionCreators)(t,e).login}}))(T),z=function(e){function r(e){var a;return Object(h.a)(this,r),(a=Object(f.a)(this,Object(E.a)(r).call(this,e))).registrationHandler=function(e){(0,a.props.registration)(e)},a.state={},a}return Object(g.a)(r,e),Object(b.a)(r,[{key:"render",value:function(){var e=this,r=this.props,a=r.isSuccessful,t=r.error;return o.a.createElement(w.b,{initialValues:{username:"",password:"",email:""},validationSchema:O,onSubmit:function(r,a){a.setSubmitting,a.resetForm;e.registrationHandler(r)}},(function(e){var r=e.values,n=e.errors,l=e.touched,s=e.handleChange,i=e.handleBlur,c=e.handleSubmit;return o.a.createElement("form",{className:"form",onSubmit:c},o.a.createElement(N,{label:"\u0438\u043c\u044f",changer:s,blur:i,idName:"username",value:r.username,touched:l.username,error:n.username,apiError:t?t.username:null}),o.a.createElement(N,{label:"email",changer:s,blur:i,idName:"email",value:r.email,touched:l.email,error:n.email,apiError:t?t.email:null}),o.a.createElement(N,{label:"\u043f\u0430\u0440\u043e\u043b\u044c",changer:s,blur:i,idName:"password",value:r.password,touched:l.password,error:n.password,apiError:t?t.password:null}),o.a.createElement("div",{className:"form__row"},o.a.createElement(v.a,{className:"form__submit-btn",htmlType:"submit",type:"primary"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),o.a.createElement(p.b,{to:"/login"},o.a.createElement(v.a,{type:"danger"},"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"))),a?o.a.createElement("div",null,"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c"):null)}))}}]),r}(n.Component),B=Object(c.b)((function(e){return{isSuccessful:e.user.isSuccessful,error:e.user.error}}),(function(e){return{registration:Object(i.bindActionCreators)(t,e).registration}}))(z),P=a(199),q=a.n(P),G=Object(c.b)()((function(){return o.a.createElement("header",{className:"header"},o.a.createElement("div",{className:"header__left"},o.a.createElement(p.b,{to:"/"},o.a.createElement("img",{className:"header__logo",src:q.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f RealWorld"}))),o.a.createElement("div",{className:"header__right"},o.a.createElement(p.b,{to:"/login"},o.a.createElement(v.a,{className:"header__button",type:"primary"},"Login")),o.a.createElement(p.b,{to:"/signup"},o.a.createElement(v.a,{className:"header__button",type:"danger"},"Registration"))))})),H=function(e){var r=e.isAuthorized;return o.a.createElement(p.a,null,o.a.createElement(G,null),o.a.createElement("div",{className:"App"},o.a.createElement(d.b,{exact:!0,path:"/",render:r?o.a.createElement(d.a,{to:"/login"}):null}),o.a.createElement(d.b,{path:"/login",component:A}),o.a.createElement(d.b,{path:"/signup",component:B})))};H.defaultProps={isAuthorized:null};var J=Object(c.b)((function(e){return{isAuthorized:e.user.isAuthorized}}))(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(132),D={email:"",username:"",password:"",isSuccessful:"",error:null,isAuthorized:null},I=Object(i.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,r=arguments.length>1?arguments[1]:void 0,a=r.payload;switch(r.type){case"USER_REGISTERED":return Object(W.a)({},e,{isSuccessful:a.reg,error:null});case"REG_ERROR":return Object(W.a)({},e,{isSuccessful:null,error:a.error});default:return e}}}),U=Object(i.createStore)(I,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(m.a)));s.a.render(o.a.createElement(c.a,{store:U},o.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[201,1,2]]]);
//# sourceMappingURL=main.5dcf3b69.chunk.js.map