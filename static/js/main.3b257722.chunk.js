(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{194:function(e,r,t){e.exports=t.p+"static/media/realworld.ea1785a0.png"},202:function(e,r,t){e.exports=t(394)},212:function(e,r,t){},394:function(e,r,t){"use strict";t.r(r);var a={};t.r(a),t.d(a,"registration",(function(){return w})),t.d(a,"login",(function(){return O})),t.d(a,"createArticle",(function(){return j})),t.d(a,"clear",(function(){return k})),t.d(a,"exit",(function(){return A}));var n=t(0),o=t.n(n),l=t(35),c=t.n(l),i=t(7),u=t(8),s=t(182),m=t(183),d=(t(210),t(211),t(212),t(37)),p=t(12),h=t(395),f=t(127),b=t(21),E=t(28),g=function(e){var r=e.label,t=e.changer,a=e.blur,n=e.idName,l=e.value,c=e.touched,i=e.error,u=e.apiError;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"form__row"},o.a.createElement("span",{className:"form__label"},r[0].toUpperCase()+r.slice(1)),o.a.createElement(h.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ".concat(r),onChange:t,onBlur:a,id:n,name:n,value:l,className:"form__input ".concat(c&&i?"has-error":"")})),c&&i?o.a.createElement("div",{className:"input__error"},i):null,u?o.a.createElement("div",{className:"input__error"},u):null)};g.defaultProps={label:"",idName:"",value:"",error:null,apiError:null,changer:null,blur:null,touched:null};var v=g,y=t(6),_=t.n(y),w=function(e){var r=e.email,t=e.username,a=e.password;return function(e){var n,o;return _.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,_.a.awrap(fetch("https://conduit.productionready.io/api/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{email:r,username:t,password:a}})}));case 2:if(!(n=l.sent).ok){l.next=5;break}return l.abrupt("return",e({type:"USER_REGISTERED",payload:{reg:!0}}));case 5:return l.next=7,_.a.awrap(n.json().then((function(e){return{type:"REG_ERROR",payload:{error:e.errors}}})));case 7:return o=l.sent,l.abrupt("return",e(o));case 9:case"end":return l.stop()}}))}},N=t(10),O=function(e){var r=e.email,t=e.password;return function(e){var a,n,o;return _.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,_.a.awrap(fetch("https://conduit.productionready.io/api/users/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{email:r,password:t}})}));case 2:if(!(a=l.sent).ok){l.next=8;break}return l.next=6,_.a.awrap(a.json().then((function(e){return{type:"USER_LOGIN",payload:Object(N.a)({},e)}})));case 6:return n=l.sent,l.abrupt("return",e(n));case 8:return l.next=10,_.a.awrap(a.json().then((function(){return{type:"LOGIN_ERROR"}})));case 10:return o=l.sent,l.abrupt("return",e(o));case 12:case"end":return l.stop()}}))}},j=function(e,r){return function(t){var a,n;return _.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,_.a.awrap(fetch("https://conduit.productionready.io/api/articles",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(r)},body:JSON.stringify({article:Object(N.a)({},e)})}));case 2:if(!(a=o.sent).ok){o.next=8;break}return o.next=6,_.a.awrap(a.json().then((function(e){return console.log(e),{type:"CREATE_ARTICLE",payload:Object(N.a)({},e)}})));case 6:return n=o.sent,o.abrupt("return",t(n));case 8:return o.abrupt("return","ku");case 9:case"end":return o.stop()}}))}},k=function(){return{type:"ERROR_CLEAR"}},A=function(){return{type:"LOGIN_EXIT"}},R=E.object().shape({password:E.string().min(8,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 8").max(40,"\u041d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 40"),email:E.string().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email \u0430\u0434\u0440\u0435\u0441")}),x=function(e){var r=e.error,t=e.isAuthorized,a=e.login,n=e.clear;return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.b,{exact:!0,path:"/login",render:function(){return t?o.a.createElement(d.a,{to:"/"}):null}}),o.a.createElement(b.c,{initialValues:{password:"",email:""},validationSchema:R,onSubmit:function(e){a(e)}},(function(e){var t=e.values,l=e.errors,c=e.touched,i=e.handleChange,u=e.handleBlur;return o.a.createElement(b.b,{className:"form"},r?o.a.createElement("div",null,"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"):null,o.a.createElement(v,{label:"email",changer:i,blur:u,idName:"email",value:t.email,touched:c.email,error:l.email,apiError:r?r.email:null}),o.a.createElement("div",{className:"form__row"},o.a.createElement("span",{className:"form__label"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"),o.a.createElement(h.a.Password,{onChange:i,onBlur:u,value:t.password,id:"password",name:"password"})),o.a.createElement("div",{className:"form__row"},o.a.createElement(f.a,{htmlType:"submit",className:"form__submit-btn",type:"primary"},"\u0412\u043e\u0439\u0442\u0438"),o.a.createElement(f.a,{htmlType:"button",onClick:function(){return a({email:"gfdaker96@gmail.com",password:"321zxc321"})},className:"form__submit-btn",type:"primary"},"loginForTest"),o.a.createElement(p.b,{to:"/signup",onClick:n},o.a.createElement(f.a,{type:"danger"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))})))};x.defaultProps={login:null,error:null,isAuthorized:null,clear:null};var C=Object(u.b)((function(e){return{error:e.user.error,isAuthorized:e.user.isAuthorized}}),(function(e){var r=Object(i.bindActionCreators)(a,e);return{login:r.login,clear:r.clear}}))(x),S=E.object().shape({username:E.string().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").min(4,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 4 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(50,"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),password:E.string().min(8,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 8").max(40,"\u041d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 40"),email:E.string().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email \u0430\u0434\u0440\u0435\u0441")}),T=function(e){var r=e.isSuccessful,t=e.error,a=e.clear,n=e.registration;return o.a.createElement(b.c,{initialValues:{username:"",password:"",email:""},validationSchema:S,onSubmit:function(e,t){(0,t.setSubmitting)(r),n(e)}},(function(e){var n=e.values,l=e.errors,c=e.touched,i=e.handleChange,u=e.handleBlur;return o.a.createElement(b.b,{className:"form"},o.a.createElement(v,{label:"\u0438\u043c\u044f",changer:i,blur:u,idName:"username",value:n.username,touched:c.username,error:l.username,apiError:t?t.username:null}),o.a.createElement(v,{label:"email",changer:i,blur:u,idName:"email",value:n.email,touched:c.email,error:l.email,apiError:t?t.email:null}),o.a.createElement("div",{className:"form__row"},o.a.createElement("span",{className:"form__label"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"),o.a.createElement(h.a.Password,{onChange:i,onBlur:u,value:n.password,id:"password",name:"password"})),o.a.createElement("div",{className:"form__row"},o.a.createElement(f.a,{className:"form__submit-btn",htmlType:"submit",type:"primary"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),o.a.createElement(p.b,{to:"/login",onClick:a},o.a.createElement(f.a,{type:"danger"},"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"))),r?o.a.createElement("div",null,"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c"):null)}))};T.defaultProps={registration:null,isSuccessful:null,error:null,clear:null};var z=Object(u.b)((function(e){return{isSuccessful:e.user.isSuccessful,error:e.user.error}}),(function(e){var r=Object(i.bindActionCreators)(a,e);return{registration:r.registration,clear:r.clear}}))(T),L=t(194),I=t.n(L),P=function(e){var r=e.isAuthorized,t=e.clear,a=r?o.a.createElement("div",{className:"header__right"},o.a.createElement(p.b,{to:"/"},o.a.createElement(f.a,{type:"primary"},"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"))):o.a.createElement("div",{className:"header__right"},o.a.createElement(p.b,{to:"/login",onClick:t},o.a.createElement(f.a,{type:"primary"},"\u0412\u043e\u0439\u0442\u0438")),o.a.createElement(p.b,{to:"/signup",onClick:t},o.a.createElement(f.a,{type:"danger"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")));return o.a.createElement("header",{className:"header"},o.a.createElement("div",{className:"header__left"},o.a.createElement(p.b,{to:"/"},o.a.createElement("img",{className:"header__logo",src:I.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f RealWorld"}))),a)};P.defaultProps={isAuthorized:null,clear:null};var G=Object(u.b)((function(e){return{isAuthorized:e.user.isAuthorized}}),(function(e){return{clear:Object(i.bindActionCreators)(a,e).clear}}))(P),B=t(195),J=t(196),U=t(199),F=t(197),W=t(200),q=function(e){function r(){var e,t;Object(B.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=Object(U.a)(this,(e=Object(F.a)(r)).call.apply(e,[this].concat(n)))).check=function(){var e,r;return _.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=t.props.token,a.next=3,_.a.awrap(fetch("https://conduit.productionready.io/api/articles/?limit=100",{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}));case 3:return r=a.sent,a.next=6,_.a.awrap(r.json().then((function(e){t.check2(),console.log(e)})));case 6:case"end":return a.stop()}}))},t.check2=function(){var e,r;return _.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=t.props.token,a.next=3,_.a.awrap(fetch("https://conduit.productionready.io/api/articles/feed",{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)}}));case 3:return r=a.sent,a.next=6,_.a.awrap(r.json().then((function(e){return console.log(e)})));case 6:case"end":return a.stop()}}))},t}return Object(W.a)(r,e),Object(J.a)(r,[{key:"render",value:function(){var e=this.props,r=e.id,t=e.email,a=e.username,n=e.exit;return o.a.createElement("form",{className:"user",onSubmit:n},o.a.createElement("div",{className:"user__info"},o.a.createElement("div",{className:"user__row"},"id: ",r),o.a.createElement("div",{className:"user__row"},"email: ",t),o.a.createElement("div",{className:"user__row"},"username: ",a)),o.a.createElement("button",{onClick:this.check,type:"button"},"clic k"),o.a.createElement(p.b,{to:"/add"},o.a.createElement(f.a,{type:"primary"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")),o.a.createElement(f.a,{htmlType:"submit",className:"user__btn",type:"danger"},"\u0412\u044b\u0445\u043e\u0434"))}}]),r}(o.a.Component);q.defaultProps={id:"",email:"",username:"",exit:null,token:""};var D=Object(u.b)((function(e){return{id:e.user.id,email:e.user.email,username:e.user.username,token:e.user.token}}),(function(e){return{exit:Object(i.bindActionCreators)(a,e).exit}}))(q),V=function(e){var r=e.isAuthorized,t=e.createArticle,a=e.token,n=e.login;return o.a.createElement(b.c,{initialValues:{title:"",description:"",body:"",tagList:[""]},onSubmit:function(e){if(r){var n=Object(N.a)({},e,{tagList:e.tagList.filter((function(e){return""!==e}))});t(n,a)}else alert("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f")}},(function(e){var r=e.values,t=e.errors,a=e.touched,l=e.handleChange,c=e.handleBlur;return o.a.createElement(b.b,{className:"form"},o.a.createElement(v,{label:"title",changer:l,blur:c,idName:"title",value:r.title,touched:a.title,error:t.title}),o.a.createElement(v,{label:"description",changer:l,blur:c,idName:"description",value:r.description,touched:a.description,error:t.description}),o.a.createElement(v,{label:"body",changer:l,blur:c,idName:"body",value:r.body,touched:a.body,error:t.body}),o.a.createElement(b.a,{name:"tagList",render:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"form__row-tags"},r.tagList.map((function(e,t){var a="tag-".concat(t);return o.a.createElement("div",{key:a,className:"form__row"},o.a.createElement(h.a,{className:"form__tag",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u044d\u0433",onChange:l,onBlur:c,value:r.tagList[t],id:"tagList".concat(t),name:"tagList.".concat(t)}))}))),o.a.createElement(f.a,{type:"button",onClick:function(){return e.push("")}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u044d\u0433"))}}),o.a.createElement("div",{className:"form__row"},o.a.createElement(f.a,{htmlType:"submit",className:"form__submit-btn",type:"primary"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e")),o.a.createElement("button",{type:"button",onClick:function(){return n({email:"gfdaker96@gmail.com",password:"321zxc321"})}},"login"))}))};V.defaultProps={isAuthorized:null,token:"",createArticle:null,login:null};var X=Object(u.b)((function(e){return{isAuthorized:e.user.isAuthorized,token:e.user.token}}),(function(e){var r=Object(i.bindActionCreators)(a,e);return{createArticle:r.createArticle,login:r.login}}))(V),M=function(e){var r=e.isAuthorized;return o.a.createElement(p.a,null,o.a.createElement(G,null),o.a.createElement("div",{className:"App"},o.a.createElement(d.d,null,o.a.createElement(d.b,{exact:!0,path:"/",render:function(){return r?o.a.createElement(D,null):o.a.createElement(d.a,{to:"/login"})}}),o.a.createElement(d.b,{path:"/login",component:C}),o.a.createElement(d.b,{path:"/signup",component:z}),o.a.createElement(d.b,{path:"/add",component:X}))))};M.defaultProps={isAuthorized:null};var $=Object(u.b)((function(e){return{isAuthorized:e.user.isAuthorized}}))(M);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H={isSuccessful:null,error:null,isAuthorized:null},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,r=arguments.length>1?arguments[1]:void 0,t=r.payload;switch(r.type){case"USER_REGISTERED":return Object(N.a)({},e,{isSuccessful:t.reg,error:null});case"REG_ERROR":return Object(N.a)({},e,{isSuccessful:null,error:t.error});case"USER_LOGIN":return Object(N.a)({},e,{},t.user,{isAuthorized:!0});case"LOGIN_ERROR":return Object(N.a)({},e,{error:!0});case"LOGIN_EXIT":return Object(N.a)({},H);case"ERROR_CLEAR":return Object(N.a)({},e,{error:null});default:return e}},Q=t(198),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"CREATE_ARTICLE":return[].concat(Object(Q.a)(e),[r.payload]);default:return e}},Z=Object(i.combineReducers)({user:K,articles:Y}),ee=Object(i.createStore)(Z,Object(s.composeWithDevTools)(Object(i.applyMiddleware)(m.a)));c.a.render(o.a.createElement(u.a,{store:ee},o.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[202,1,2]]]);
//# sourceMappingURL=main.3b257722.chunk.js.map