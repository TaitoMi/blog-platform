(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{194:function(e,r,a){e.exports=a.p+"static/media/realworld.ea1785a0.png"},196:function(e,r,a){e.exports=a(388)},206:function(e,r,a){},388:function(e,r,a){"use strict";a.r(r);var t={};a.r(t),a.d(t,"registration",(function(){return y})),a.d(t,"login",(function(){return O})),a.d(t,"clear",(function(){return R})),a.d(t,"exit",(function(){return j}));var n=a(0),l=a.n(n),s=a(32),o=a.n(s),u=a(6),i=a(16),c=a(182),m=a(183),d=(a(204),a(205),a(206),a(35)),p=a(33),E=a(389),f=a(127),h=a(58),b=a(24),v=function(e){var r=e.label,a=e.changer,t=e.blur,n=e.idName,s=e.value,o=e.touched,u=e.error,i=e.apiError;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"form__row"},l.a.createElement("span",{className:"form__label"},r[0].toUpperCase()+r.slice(1)),l.a.createElement(E.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ".concat(r),onChange:a,onBlur:t,id:n,name:n,value:s,className:"form__input ".concat(o&&u?"has-error":"")})),o&&u?l.a.createElement("div",{className:"input__error"},u):null,i?l.a.createElement("div",{className:"input__error"},i):null)};v.defaultProps={label:"",idName:"",value:"",error:"",apiError:"",changer:null,blur:null,touched:null};var _=v,g=a(25),w=a(37),N=a.n(w),y=function(e){var r=e.email,a=e.username,t=e.password;return function(e){var n,l;return N.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,N.a.awrap(fetch("https://conduit.productionready.io/api/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{email:r,username:a,password:t}})}));case 2:if(!(n=s.sent).ok){s.next=5;break}return s.abrupt("return",e({type:"USER_REGISTERED",payload:{reg:!0}}));case 5:return s.next=7,N.a.awrap(n.json().then((function(e){return{type:"REG_ERROR",payload:{error:e.errors}}})));case 7:return l=s.sent,s.abrupt("return",e(l));case 9:case"end":return s.stop()}}))}},O=function(e){var r=e.email,a=e.password;return function(e){var t,n,l;return N.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,N.a.awrap(fetch("https://conduit.productionready.io/api/users/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{email:r,password:a}})}));case 2:if(!(t=s.sent).ok){s.next=8;break}return s.next=6,N.a.awrap(t.json().then((function(e){return{type:"USER_LOGIN",payload:Object(g.a)({},e)}})));case 6:return n=s.sent,s.abrupt("return",e(n));case 8:return s.next=10,N.a.awrap(t.json().then((function(){return{type:"LOGIN_ERROR"}})));case 10:return l=s.sent,s.abrupt("return",e(l));case 12:case"end":return s.stop()}}))}},R=function(){return{type:"ERROR_CLEAR"}},j=function(){return{type:"LOGIN_EXIT"}},S=b.object().shape({password:b.string().min(8,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 8").max(40,"\u041d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 40"),email:b.string().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email \u0430\u0434\u0440\u0435\u0441")}),x=function(e){var r=e.error,a=e.isAuthorized,t=e.login,n=e.clear;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.b,{exact:!0,path:"/login",render:function(){return a?l.a.createElement(d.a,{to:"/"}):null}}),l.a.createElement(h.b,{initialValues:{password:"",email:""},validationSchema:S,onSubmit:function(e){t(e)}},(function(e){var a=e.values,t=e.errors,s=e.touched,o=e.handleChange,u=e.handleBlur;return l.a.createElement(h.a,{className:"form"},r?l.a.createElement("div",null,"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"):null,l.a.createElement(_,{label:"email",changer:o,blur:u,idName:"email",value:a.email,touched:s.email,error:t.email,apiError:r?r.email:null}),l.a.createElement("div",{className:"form__row"},l.a.createElement("span",{className:"form__label"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"),l.a.createElement(E.a.Password,{onChange:o,onBlur:u,value:a.password,id:"password",name:"password"})),l.a.createElement("div",{className:"form__row"},l.a.createElement(f.a,{htmlType:"submit",className:"form__submit-btn",type:"primary"},"\u0412\u043e\u0439\u0442\u0438"),l.a.createElement(p.b,{to:"/signup",onClick:n},l.a.createElement(f.a,{type:"danger"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))})))};x.defaultProps={login:null,error:null,isAuthorized:null,clear:null};var A=Object(i.b)((function(e){return{error:e.user.error,isAuthorized:e.user.isAuthorized}}),(function(e){var r=Object(u.bindActionCreators)(t,e);return{login:r.login,clear:r.clear}}))(x),C=b.object().shape({username:b.string().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").min(4,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 4 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(50,"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),password:b.string().min(8,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 8").max(40,"\u041d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 40"),email:b.string().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email \u0430\u0434\u0440\u0435\u0441")}),T=function(e){var r=e.isSuccessful,a=e.error,t=e.clear,n=e.registration;return l.a.createElement(h.b,{initialValues:{username:"",password:"",email:""},validationSchema:C,onSubmit:function(e,a){(0,a.setSubmitting)(r),n(e)}},(function(e){var n=e.values,s=e.errors,o=e.touched,u=e.handleChange,i=e.handleBlur;return l.a.createElement(h.a,{className:"form"},l.a.createElement(_,{label:"\u0438\u043c\u044f",changer:u,blur:i,idName:"username",value:n.username,touched:o.username,error:s.username,apiError:a?a.username:null}),l.a.createElement(_,{label:"email",changer:u,blur:i,idName:"email",value:n.email,touched:o.email,error:s.email,apiError:a?a.email:null}),l.a.createElement("div",{className:"form__row"},l.a.createElement("span",{className:"form__label"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"),l.a.createElement(E.a.Password,{onChange:u,onBlur:i,value:n.password,id:"password",name:"password"})),l.a.createElement("div",{className:"form__row"},l.a.createElement(f.a,{className:"form__submit-btn",htmlType:"submit",type:"primary"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),l.a.createElement(p.b,{to:"/login",onClick:t},l.a.createElement(f.a,{type:"danger"},"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"))),r?l.a.createElement("div",null,"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c"):null)}))};T.defaultProps={registration:null,isSuccessful:null,error:null,clear:null};var I=Object(i.b)((function(e){return{isSuccessful:e.user.isSuccessful,error:e.user.error}}),(function(e){var r=Object(u.bindActionCreators)(t,e);return{registration:r.registration,clear:r.clear}}))(T),k=a(194),z=a.n(k),G=function(){return l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"header__left"},l.a.createElement(p.b,{to:"/"},l.a.createElement("img",{className:"header__logo",src:z.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f RealWorld"}))))},P=function(e){var r=e.id,a=e.email,t=e.username,n=e.exit;return l.a.createElement("form",{className:"user",onSubmit:n},l.a.createElement("div",{className:"user__info"},l.a.createElement("div",{className:"user__row"},"id: ",r),l.a.createElement("div",{className:"user__row"},"email: ",a),l.a.createElement("div",{className:"user__row"},"username: ",t)),l.a.createElement(f.a,{htmlType:"submit",className:"user__btn",type:"danger"},"\u0412\u044b\u0445\u043e\u0434"))};P.defaultProps={id:"",email:"",username:"",exit:null};var L=Object(i.b)((function(e){return{id:e.user.id,email:e.user.email,username:e.user.username}}),(function(e){return{exit:Object(u.bindActionCreators)(t,e).exit}}))(P),B=function(e){var r=e.isAuthorized;return l.a.createElement(p.a,null,l.a.createElement(G,null),l.a.createElement("div",{className:"App"},l.a.createElement(d.b,{exact:!0,path:"/",render:function(){return r?l.a.createElement(L,null):l.a.createElement(d.a,{to:"/login"})}}),l.a.createElement(d.b,{path:"/login",component:A}),l.a.createElement(d.b,{path:"/signup",component:I})))};B.defaultProps={isAuthorized:null};var U=Object(i.b)((function(e){return{isAuthorized:e.user.isAuthorized}}))(B);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J={isSuccessful:null,error:null,isAuthorized:null},W=Object(u.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,r=arguments.length>1?arguments[1]:void 0,a=r.payload;switch(r.type){case"USER_REGISTERED":return Object(g.a)({},e,{isSuccessful:a.reg,error:null});case"REG_ERROR":return Object(g.a)({},e,{isSuccessful:null,error:a.error});case"USER_LOGIN":return Object(g.a)({},e,{},a.user,{isAuthorized:!0});case"LOGIN_ERROR":return Object(g.a)({},e,{error:!0});case"LOGIN_EXIT":return Object(g.a)({},J);case"ERROR_CLEAR":return Object(g.a)({},e,{error:null});default:return e}}}),q=Object(u.createStore)(W,Object(c.composeWithDevTools)(Object(u.applyMiddleware)(m.a)));o.a.render(l.a.createElement(i.a,{store:q},l.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[196,1,2]]]);
//# sourceMappingURL=main.b5aee9c1.chunk.js.map